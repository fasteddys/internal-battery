@using Microsoft.AspNetCore.Mvc.Localization
@using UpDiddy.ViewModels
@using UpDiddyLib.Dto
@using System.Collections.Generic;
@using System;
@model IEnumerable<SubscriberDto>

<div class="subscribers-container">
    <h2>Talent Portal - Subscribers</h2>
    <input id="GridSearch" />
    @Html.AjaxGrid(Url.Action("SubscriberGrid"))
</div>

<script type="text/javascript">
    window.onload = function () {
        var grid = new MvcGrid(document.querySelector('.mvc-grid'));
        document.getElementById('GridSearch').addEventListener('input', function () {
            doSearch();
        });
    }
    var delayTimer;
    function doSearch() {
        clearTimeout(delayTimer);
        delayTimer = setTimeout(function () {
            var grid = new MvcGrid(document.querySelector('.mvc-grid'));
            var search = document.getElementById('GridSearch').value;
            grid.query.set('searchQuery', search);
            grid.reload();
        }, 600);
    }   
</script>