$(document).ready(function(){$("#SelectedCountry").change(function(){var n=$("#SelectedCountry").val(),t=$("#SelectedState");t.empty();n!=null&&n!=""&&$.getJSON(url,{countryGuid:n},function(n){if(n!=null&&!jQuery.isEmptyObject(n)){t.append($("<option/>",{value:"---",text:"Select State"}));$.each(n.value,function(n,i){t.append($("<option/>",{value:i.stateGuid,text:i.name}))});var i=$("#SavedStateGuid").val();i===undefined||i==="00000000-0000-0000-0000-000000000000"||i===""?$("#SelectedState").val("---"):$("#SelectedState").val(i)}})});var n=$("#SelectedCountry").val();n===undefined||n==="00000000-0000-0000-0000-000000000000"||n===""?$("#SelectedCountry option:eq(1)").attr("selected","selected"):$("#SelectedCountry").val(n);$("input[name='SelectedCourseVariant']").change(function(){var n=$("input[name='SelectedCourseVariant']:checked"),r=$(n).parent().next().children(".price").html(),t,i;$("#InitialCoursePrice").html(r);$("#PromoCodeTotal").html().startsWith("-$")?(t=parseFloat($("#InitialCoursePrice").html().replace(",","").split("$")[1]),i=Math.min(parseFloat($("#PromoCodeTotal").html().replace(",","").split("$")[1]),t),$("#PromoCodeTotal").html("-$"+i.toFixed(2)),$("#CourseTotal").html("$"+(t-i).toFixed(2))):$("#CourseTotal").html(r);$(n).parent().parent().children(".CourseVariantStartDate").show();$(n).parent().parent().siblings().children(".CourseVariantStartDate").hide();$("#CourseTotal").html()==="$0.00"?$("#BraintreePaymentContainer").hide():$("#BraintreePaymentContainer").show()});$("#SameAsAboveCheckbox").change(function(){this.checked?($(".billing-info-container").hide(),$(".billing-info-container input, .billing-info-container select").removeAttr("required")):($(".billing-info-container").show(),$(".billing-info-container input, .billing-info-container select").prop("required",!0))});$("#TermsOfServiceCheckbox").prop("checked",!1);$("#TermsOfServiceCheckbox").change(function(){this.checked?$("#EnrollmentSubmitButton").prop("disabled",!1):$("#EnrollmentSubmitButton").prop("disabled",!0)});$(".play-button").on("click",function(){$(this).hide();$(".enrollment-success-video-thumbnail").hide();$("#EnrollmentSuccessVideo").prop("controls",!0);document.getElementById("EnrollmentSuccessVideo").play()});$(".courses-in-progress-list-desktop li").each(function(){var n=$(this).find(".progress-bar"),t=$(n).attr("aria-valuenow")+"%";$(n).animate({width:t})});$("#PromoCodeApplyButton").on("click",function(){var n=$("#PromoCodeInput").val(),t=$("input[name='SelectedCourseVariant']:checked").val(),i=$("#SubscriberGuid").val();if(typeof t=="undefined")$("#ValidationMessageError span").html("A course section must be selected before applying a promo code."),$("#ValidationMessageSuccess").hide(),$("#ValidationMessageError").show();else if(n!==undefined&&$.trim(n)!==""&&typeof t!="undefined"){var r=$("#CourseCheckoutForm"),u=$('input[name="__RequestVerificationToken"]',r).val(),f="/Course/PromoCodeValidation/"+n+"/"+t+"/"+i;$.ajax({url:f,type:"POST",contentType:"application/x-www-form-urlencoded",headers:{RequestVerificationToken:u},success:function(n){n.isValid?($("#ValidationMessageSuccess span").html(n.validationMessage),$("#ValidationMessageSuccess").show(),$("#ValidationMessageError").hide(),$("#PromoCodeTotal").html("-$"+n.discount.toFixed(2)),$("#CourseTotal").html("$"+n.finalCost.toFixed(2)),$("#PromoCodeRedemptionGuid").val(n.promoCodeRedemptionGuid),$("#PromoCodeApplyButton").prop("disabled",!0),$("#PromoCodeApplyButton").css("color","white"),n.finalCost===0&&$("#BraintreePaymentContainer").hide()):($("#ValidationMessageError span").html(n.validationMessage),$("#ValidationMessageSuccess").hide(),$("#ValidationMessageError").show())},error:function(){$("#ValidationMessageError span").html("Woops! Something went wrong - please try another promo code.");$("#ValidationMessageSuccess").hide();$("#ValidationMessageError").show()}})}else $("#ValidationMessageError span").html("No promotional code was supplied; please enter a value and try again."),$("#ValidationMessageSuccess").hide(),$("#ValidationMessageError").show()});$("#phone-number").keydown(function(n){var t=n.which||n.charCode||n.keyCode||0;return($phone=$(this),$phone.val().length===1&&(t===8||t===46))?($phone.val("("),!1):($phone.val().charAt(0)!=="("&&$phone.val("("+String.fromCharCode(n.keyCode)+""),t!==8&&t!==9&&($phone.val().length===4&&$phone.val($phone.val()+")"),$phone.val().length===5&&$phone.val($phone.val()+" "),$phone.val().length===9&&$phone.val($phone.val()+"-")),t==8||t==9||t==46||t>=48&&t<=57||t>=96&&t<=105)}).bind("focus click",function(){if($phone=$(this),$phone.val().length===0)$phone.val("(");else{var n=$phone.val();$phone.val("").val(n)}}).blur(function(){$phone=$(this);$phone.val()==="("&&$phone.val("")})});var SessionStorage=function(){return{set:function(n,t){window.sessionStorage.setItem(n,t)},getJSON:function(n){return JSON.parse(window.sessionStorage.getItem(n))},get:function(n){return window.sessionStorage.getItem(n)},clear:function(){window.sessionStorage.clear()}}}(),CareerCircleAPI=function(n){var t="ccapi",i=n.trim().replace(/\/$/,""),r=function(n){var t;return u().then(function(r){return t=r,$.ajax({url:i+n,headers:{"Content-Type":"application/json",Authorization:"Bearer "+t.AccessToken}})})},u=function(){var n=SessionStorage.getJSON(t);return n==null||new Date<=new Date(n.ExpiresOn)?new Promise(n=>{e().done(function(i){SessionStorage.set(t,i);n(SessionStorage.getJSON(t))})}):new Promise(t=>{t(n)})},f=function(){SessionStorage.clear()},e=function(){return $.ajax({url:"/session/token",headers:{"Content-Type":"application/json"}})},o=function(){return r("/profile")};return{getProfile:o,signOut:f}}(API_URL);